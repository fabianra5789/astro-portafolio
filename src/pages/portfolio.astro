---
import { WORK } from '../lib/constants'
import BaseLayout from '../layouts/BaseLayout.astro'
import TopLayout from '../layouts/TopLayout.astro'
import BottomLayout from '../layouts/BottomLayout.astro'
import ProjectCard from '../components/ProjectCard.astro'
import { contentfulClient } from '../lib/contentful'
import type { EntryFieldTypes } from 'contentful'
import { Github, ExternalLink } from 'lucide-react'
import { Button } from '../components/ui/button'

interface Project {
contentTypeId: 'Projects'
fields: {
name: EntryFieldTypes.Text
img: EntryFieldTypes.AssetLink
website: EntryFieldTypes.EntryResourceLink<any>
repositorio: EntryFieldTypes.EntryResourceLink<any>
description: EntryFieldTypes.Text
 }
}

const entries = await contentfulClient.getEntries<Project>({})
---

<BaseLayout
title="Portfolio"
description="Projects and some clone's that I did"
>
<main class="flex min-h-[80vh] flex-auto flex-col" transition:animate="slide">
<TopLayout>
<div class="text-center space-y-4">
<h2 class="scroll-m-20 border-b-2 border-primary/20 pb-4 text-4xl font-bold tracking-tight first:mt-0 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent">
âœ¨ Projects & Clone's
</h2>
<p class="text-lg text-muted-foreground max-w-2xl mx-auto leading-relaxed">
Explora mi colecciÃ³n de proyectos creativos y clones funcionales que demuestran mis habilidades de desarrollo
</p>
</div>
</TopLayout>
<BottomLayout size="xl">
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
{
entries.items.map((entry: any) => (
<div
key={entry?.sys?.id}
class="group relative rounded-xl shadow-lg border border-border bg-card hover:shadow-xl transition-all duration-300 hover:scale-[1.02] overflow-hidden"
>
{/* Decorative gradient overlay */}
<div class="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

{/* Image container with improved styling */}
<div class="relative overflow-hidden rounded-t-xl">
<img
src={entry?.fields?.img?.fields?.file?.url}
alt={entry?.fields?.img?.fields?.title || 'Project image'}
class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-110"
/>
<div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
</div>

{/* Content with improved spacing */}
<div class="relative p-6 space-y-3">
<h3 class="text-lg font-bold text-card-foreground group-hover:text-primary transition-colors duration-300 line-clamp-2">
{entry?.fields?.name}
</h3>
<p class="text-sm text-muted-foreground leading-relaxed line-clamp-2">
{entry?.fields?.description}
</p>

{/* Compact button layout */}
<div class="flex gap-2 pt-1">
<a
href={entry?.fields?.website}
target="_blank"
rel="noopener noreferrer"
class="flex-1"
>
<Button size="sm" className="w-full h-8 text-xs flex items-center justify-center gap-1.5 transition-all duration-200 hover:scale-105">
<ExternalLink size={14} />
<span class="hidden sm:inline">Ver Proyecto</span>
<span class="sm:hidden">Ver</span>
</Button>
</a>
<a
href={entry?.fields?.repositorio}
target="_blank"
rel="noopener noreferrer"
class="flex-1"
>
<Button size="sm" variant="outline" className="w-full h-8 text-xs flex items-center justify-center gap-1.5 transition-all duration-200 hover:scale-105">
<Github size={14} />
<span class="hidden sm:inline">Repositorio</span>
<span class="sm:hidden">Repo</span>
</Button>
</a>
</div>
</div>

{/* Subtle corner accent */}
<div class="absolute top-4 right-4 w-2 h-2 bg-primary rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
</div>
))
}
</div>

{/* Enhanced empty state */}
{entries.items.length === 0 && (
<div class="text-center py-20 space-y-6">
<div class="text-8xl opacity-50">ðŸš€</div>
<div class="space-y-2">
<h3 class="text-3xl font-bold text-card-foreground">Â¡PrÃ³ximamente!</h3>
<p class="text-lg text-muted-foreground max-w-md mx-auto">
Estoy trabajando en proyectos increÃ­bles que pronto estarÃ¡n disponibles aquÃ­.
</p>
</div>
<div class="w-24 h-1 bg-gradient-to-r from-primary to-primary/50 mx-auto rounded-full"></div>
</div>
)}
</BottomLayout>
</main>
</BaseLayout>
